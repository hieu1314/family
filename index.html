<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NÆ¡i lÆ°u giá»¯ ká»· niá»‡m</title>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Timeline -->
 <link rel="stylesheet" href="https://unpkg.com/vis-timeline/styles/vis-timeline-graph2d.min.css">
<script src="https://unpkg.com/vis-timeline/standalone/umd/vis-timeline-graph2d.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="back.css">

      <link rel="stylesheet" href="chat.css">
<script type="module" src="chat.js"></script>

</head>

<body>

<header>
    <h1>NÆ¡i lÆ°u giá»¯ ká»· niá»‡m</h1>
    <h2>Cherryâ€™s Family Journeys</h2>
    <!-- VIEWER POPUP BEGIN -->
<div id="headerViewer" class="hv-hidden">
    <span id="hvClose">&times;</span>
    <img id="hvImg" src="">
</div>

</header>

<!-- GÃ³c trÃªn bÃªn pháº£i -->
<div id="userMenu">
  <button id="userBtn" title="TÃ i khoáº£n"></button>

  <div id="userDropdown">
    <button id="changeNickBtn">Äá»•i tÃªn trong chat</button>
    <button id="logoutBtn">ÄÄƒng xuáº¥t</button>
  </div>
</div>


<script type="module" src="user.js"></script>

<!-- TIMELINE -->
<div id="timeline-wrapper" style="position: relative;">
    <div id="timeline"></div>
   <button id="nowBtn">Now</button>
</div>


<!-- MAP + INFO -->
 
<div id="map-info-wrapper">
     <div id="map">
        <div id="mapCover">
            <img src="images/vietnam.jpg" alt="Vietnam Map">
        </div>
    </div>
    <div id="info"></div>
</div>

<!-- VIEWER POPUP -->
<div id="viewer" class="hidden">
    <span class="close" onclick="closeViewer()">Ã—</span>
    <button id="prevImg">&#10094;</button>
    <img id="viewerImg">
    <button id="nextImg">&#10095;</button>
</div>

<!-- JS -->
 <script defer src="back.js"></script>
<script src="app.js"></script>
<script src="main.js"></script>


<!-- STAR LAYER -->
<div id="star-layer"></div>

<!-- VIEWER -->
<div id="viewer" class="hidden">
  <span class="close" onclick="closeViewer()">Ã—</span>
  <button id="prevImg">&#10094;</button>
  <img id="viewerImg">
  <button id="nextImg">&#10095;</button>
</div>

<!-- Kiá»ƒm tra Ä‘Äƒng nháº­p -->
<script type="module">
import { auth } from "./firebase-config.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

// Báº£o vá»‡ index.html
onAuthStateChanged(auth, user => {
  if (!user) {
    // Náº¿u chÆ°a login â†’ chuyá»ƒn vá» login.html
    window.location.href = "login.html";
  }
});
</script>

<button class="chat-floating-btn" id="chatToggleBtn" onclick="toggleChat()">ğŸ’¬</button>

<div id="chatBox" class="chatbox">
  <div class="chatbox-header" onclick="toggleChat()">Cherryâ€™s Family Chat</div>

  <div class="chatbox-body">

    <div id="chatMessages" class="messages"></div>

    <!-- Nháº­p tin nháº¯n -->
    <div class="chat-input">
      <input type="text" id="chatMessage" placeholder="Nháº­p tin nháº¯n..." autocomplete="off">
      <button id="emojiBtn">ğŸ˜„</button>
      <button onclick="sendMessage()">Gá»­i</button>
    </div>

    <!-- ================== EMOJI PANEL (Ä‘Ã£ sá»­a) ================== -->
    <div id="emojiPanel" class="emoji-panel">

      <!-- TAB BUTTONS -->
      <div class="emoji-tabs">
        <button onclick="openEmojiTab('tab-smileys')" class="emoji-tab active">ğŸ˜Š</button>
        <button onclick="openEmojiTab('tab-animals')" class="emoji-tab">ğŸ¶</button>
        <button onclick="openEmojiTab('tab-food')" class="emoji-tab">ğŸ”</button>
        <button onclick="openEmojiTab('tab-travel')" class="emoji-tab">âœˆï¸</button>
        <button onclick="openEmojiTab('tab-symbols')" class="emoji-tab">â¤ï¸</button>
      </div>

      <!-- TAB CONTENT: Smileys -->
      <div id="tab-smileys" class="emoji-content show">
        <span onclick="addEmoji('ğŸ˜€')">ğŸ˜€</span>
        <span onclick="addEmoji('ğŸ˜')">ğŸ˜</span>
        <span onclick="addEmoji('ğŸ˜‚')">ğŸ˜‚</span>
        <span onclick="addEmoji('ğŸ¤£')">ğŸ¤£</span>
        <span onclick="addEmoji('ğŸ˜ƒ')">ğŸ˜ƒ</span>
        <span onclick="addEmoji('ğŸ˜„')">ğŸ˜„</span>
        <span onclick="addEmoji('ğŸ˜…')">ğŸ˜…</span>
        <span onclick="addEmoji('ğŸ˜‰')">ğŸ˜‰</span>
        <span onclick="addEmoji('ğŸ˜Š')">ğŸ˜Š</span>
      </div>

      <!-- TAB CONTENT: Animals -->
      <div id="tab-animals" class="emoji-content">
        <span onclick="addEmoji('ğŸ¶')">ğŸ¶</span>
        <span onclick="addEmoji('ğŸ±')">ğŸ±</span>
        <span onclick="addEmoji('ğŸ­')">ğŸ­</span>
        <span onclick="addEmoji('ğŸ¹')">ğŸ¹</span>
        <span onclick="addEmoji('ğŸ°')">ğŸ°</span>
        <span onclick="addEmoji('ğŸ¦Š')">ğŸ¦Š</span>
        <span onclick="addEmoji('ğŸ»')">ğŸ»</span>
        <span onclick="addEmoji('ğŸ¼')">ğŸ¼</span>
      </div>

      <!-- TAB CONTENT: Food -->
      <div id="tab-food" class="emoji-content">
        <span onclick="addEmoji('ğŸ')">ğŸ</span>
        <span onclick="addEmoji('ğŸ')">ğŸ</span>
        <span onclick="addEmoji('ğŸ')">ğŸ</span>
        <span onclick="addEmoji('ğŸŠ')">ğŸŠ</span>
        <span onclick="addEmoji('ğŸ‹')">ğŸ‹</span>
        <span onclick="addEmoji('ğŸ‰')">ğŸ‰</span>
        <span onclick="addEmoji('ğŸ‡')">ğŸ‡</span>
      </div>

      <!-- TAB CONTENT: Travel -->
      <div id="tab-travel" class="emoji-content">
        <span onclick="addEmoji('âœˆï¸')">âœˆï¸</span>
        <span onclick="addEmoji('ğŸš—')">ğŸš—</span>
        <span onclick="addEmoji('ğŸš•')">ğŸš•</span>
        <span onclick="addEmoji('ğŸšŒ')">ğŸšŒ</span>
        <span onclick="addEmoji('ğŸ ')">ğŸ </span>
        <span onclick="addEmoji('ğŸ«')">ğŸ«</span>
      </div>

      <!-- TAB CONTENT: Symbols -->
      <div id="tab-symbols" class="emoji-content">
        <span onclick="addEmoji('â¤ï¸')">â¤ï¸</span>
        <span onclick="addEmoji('ğŸ’–')">ğŸ’–</span>
        <span onclick="addEmoji('âœ¨')">âœ¨</span>
        <span onclick="addEmoji('â­')">â­</span>
        <span onclick="addEmoji('ğŸ”¥')">ğŸ”¥</span>
        <span onclick="addEmoji('ğŸ’¯')">ğŸ’¯</span>
      </div>

    </div><!-- END EMOJI PANEL -->

  </div>
</div>

<!-- NÃšT XOAY GÃ“C TRÃI DÆ¯á»šI -->
<a
  href="https://hieu1314.github.io/mymusic"
  class="rotate-btn"
  title="Äi tá»›i trang nháº¡c"
></a>

<!-- NÃºt chÆ¡i game Maze -->
<a href="maze.html" class="maze-btn" title="MÃª Cung bÃ­ áº©n"></a>


</body>
</html>
